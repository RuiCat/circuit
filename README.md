# circuit
Go实现的电路仿真,参考开源 [circuitjs](https://github.com/sharpie7/circuitjs1) 库的Go版本实现.
## 当前Bug列表

## 开发日志
  根据 [参考资料](https://lpsa.swarthmore.edu/Systems/Electrical/mna/MNA1.html) [参考资料](https://qucs.sourceforge.net/tech/technical.html) 实现MNA的处理
  * [2025-11-17] 准备重写
    > 重构想法通过创建全局上下文来管理整个仿真过程.  
    > 通过函数工程模式对上下文进行加工同时让上下文保存整个仿真的数据与状态,通过事件来注册与获取指定的接口.
    * utils 实现基础底层结构包  
      1. Bitmap 位图标记结构
      2. Event 事件管理
      3. Flag 事件标记管理
    * maths 矩阵实现
  * [2025-11-18] 实现矩阵相关内容
    1. 基础的矩阵与向量结构体实现
    2. 基础结构的lu分解实现
  * [2025-11-20] 增加 Mna 矩阵
    1. 添加 mna 矩阵加盖实现
    2. 修改 maths 包实现
    3. 增加参考技术文档
    4. 实现基础结构定义
  * [2025-11-21]
    1. 尝试构建基础元件底层实现
  * [2025-11-21]
    1. 尝试基础电路仿真
  * [2025-11-23]
    1. 实现最基础的电子元件仿真
  * [2025-11-25]
    1. 将元件配置独立为 ElementConfigBase 结构体
  * [2025-11-27]
    1. 测试电路的运放仿真
  * [2025-11-28]
    1. 修改部分代码
  * [2025-11-30]
    1. 增加测试元件实现
  * [2025-12-2]
    1. 增加 time 包实现迭代处理
    2. 测试 RC运放跟随 电路通过
  * [2025-12-12]
    1. 实现基础元件
  * [2025-12-15]
    1. 补全基础元件
  * [2025-12-29]
    1. 测试基础元件处理异常bug
  * [2025-12-30]
    1. 将 element 包移动到 utils 包下,并规划新的基于事件传递的并向处理实现
    2. 处理基础元件 二极管,运放 的错误
  * [2025-12-31]
    1. 准备移除现有的事件实现
  * [2026-1-3]
    1. 执行大量修改,优化元件实现与接口定义
  * [2026-1-4]
    1. 增加基础元件的测试文件
    2. 分离 VoltageID 与 NodeID 定义
    3. 修复lu分解在特殊情况下会产生的严重的bug
  * [2026-1-7]
    1. 代码优化
  * [2026-1-8]
    1. 潮汐计算需要底层能够处理基于复数的计算所以对底层进行泛型化处理
    2. 优化接口
  * [2026-1-9]
    1. 实现矩阵优化
  * [2026-1-12]
    1. 代码优化
    2. 将 mna 接口改为泛型
    3. 实现基础的虚拟机vm指令运行环境,使用 rv32imafd 指令集
  * [2026-1-13]
    1. 修复缺失的指令
    2. 拆分指令为列表
  * [2026-1-16]
    1. 尝试实现 Context 结构体
    2. 尝试实现并发处理
  * [2026-1-18]
    1. 完善功能
  * [2026-1-20]
    1. 修改 vm 测试代码为 c 实现
    2. 为基础元件添加变量名称信息
  * [2026-1-21]
    1. 修改网表加载过程使网表支持动态元件

## 开发任务规划
  1. [✔] 实现基于计算图构建矩阵方程求解器  
  2. [✔] 实现 MNA 求解器与基础接口定义  
  3. [✔] 实现 基础元件  
  4. [✔] 实现 加载与导出 
  5. [X] 规划元件的并向计算实现  
  6. [✔] 增加虚拟机,用于加载指令集  

## 实现过程
  ## 基础设计
  > 需要将仿真器与前端隔离并且通过事件进行操作  
  > 也就是说前端通过通道传递事件到后端进行仿真器的控制